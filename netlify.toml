[build]
  command = """
    QUARTO_VER="1.4.554" && \
    mkdir -p $HOME/quarto && \
    curl -sL https://github.com/quarto-dev/quarto-cli/releases/download/v${QUARTO_VER}/quarto-${QUARTO_VER}-linux-amd64.tar.gz | tar -xz -C $HOME/quarto --strip-components=1 && \
    export PATH=$HOME/quarto/bin:$PATH && \
    quarto render
  """
  publish = "_site"

# Redirects for clean URLs
[[redirects]]
  from = "/syllabus"
  to = "/PSYC405_S2026_001.html"
  status = 302

[[redirects]]
  from = "/section001"
  to = "/PSYC405_S2026_001.html"
  status = 301

[[redirects]]
  from = "/section002"
  to = "/PSYC405_S2026_002.html"
  status = 301

# Headers for caching
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"

[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "public, max-age=3600"

[[headers]]
  for = "/site_libs/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
